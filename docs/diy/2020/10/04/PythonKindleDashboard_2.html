<!DOCTYPE html>
<html lang="en">

  <head>
	<!-- Cookie Consent by TermsFeed (https://www.TermsFeed.com) -->
  <script type="text/javascript" src="https://www.termsfeed.com/public/cookie-consent/4.0.0/cookie-consent.js" charset="UTF-8"></script>
  <script type="text/javascript" charset="UTF-8">
  document.addEventListener('DOMContentLoaded', function () {
  cookieconsent.run({"notice_banner_type":"headline","consent_type":"express","palette":"dark","language":"en","page_load_consent_levels":["strictly-necessary"],"notice_banner_reject_button_hide":false,"preferences_center_close_button_hide":false,"page_refresh_confirmation_buttons":false,"website_privacy_policy_url":"https://blog.4dcu.be/policy/"});
  });
  </script>

	
  <!-- Google Analytics -->
    <script type="text/plain" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=UA-47068418-5"></script>
    <script type="text/plain" cookie-consent="tracking">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-47068418-5');
    </script>
  <!-- end of Google Analytics-->
	

  <noscript>ePrivacy and GPDR Cookie Consent by <a href="https://www.TermsFeed.com/" rel="nofollow">TermsFeed Generator</a></noscript>
  <!-- End Cookie Consent by TermsFeed (https://www.TermsFeed.com) -->

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Kindle + Python = e-Ink Dashboard (part 2)</title>
  <meta name="description" content="In the last post a Kindle Paperwhite 3 was jailbroken, Python 3.8 installed and all boilerplate code was added to  have a way to start our script and launch ...">
  
  <meta name="author" content="Sebastian Proost">
  <meta name="copyright" content="&copy; Sebastian Proost 2022">
  

  <!-- External libraries -->
	<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="In the last post a Kindle Paperwhite 3 was jailbroken, Python 3.8 installed and all boilerplate code was added to  have a way to start our script and launch ..." />
  <meta property="og:url" content="https://blog.4dcu.be/diy/2020/10/04/PythonKindleDashboard_2.html">
  <meta property="og:site_name" content="4DCu.be" />
  <meta property="og:title" content="Kindle + Python = e-Ink Dashboard (part 2)" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://blog.4dcu.be/assets/posts/2020-10-04-PythonKindleDashboard_2/header.jpg" />
  <meta property="og:image:type" content="image/jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Kindle + Python = e-Ink Dashboard (part 2)">
  <meta name="twitter:description" content="In the last post a Kindle Paperwhite 3 was jailbroken, Python 3.8 installed and all boilerplate code was added to  have a way to start our script and launch ...">
  <meta name="twitter:image" content="https://blog.4dcu.be/assets/posts/2020-10-04-PythonKindleDashboard_2/header.jpg">
  <meta name="twitter:url" content="https://blog.4dcu.be/diy/2020/10/04/PythonKindleDashboard_2.html">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://blog.4dcu.be/diy/2020/10/04/PythonKindleDashboard_2.html">
	<link rel="alternate" type="application/rss+xml" title="4DCu.be" href="https://blog.4dcu.be/feed.xml" />
	
	<!-- Tooltips -->
	<script type="text/javascript">
		window.tooltips = []
	</script>

	<script type='text/javascript'>
	//<![CDATA[
	function loadCSS(e, t, n) { "use strict"; var i = window.document.createElement("link"); var o = t || window.document.getElementsByTagName("script")[0]; i.rel = "stylesheet"; i.href = e; i.media = "only x"; o.parentNode.insertBefore(i, o); setTimeout(function () { i.media = n || "all" }) }loadCSS("https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css");
	//]]>
	</Script>
</head>


  <body>

    <header class="navigation" role="banner">
	<div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/icons/apple-icon-76x76.png" alt="4DCu.be" width="58" height="58" />
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
				
				<li class="nav-link"><a href="/about/">About</a>
	
				<li class="nav-link"><a href="/gallery/">Gallery</a>
	
				<li class="nav-link"><a href="/posts/">Posts</a>
	
				<li class="nav-link"><a href="#" class="nav-link-contact">Contact</a></li>

      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/posts/2020-10-04-PythonKindleDashboard_2/header.jpg);">
  <div class="scrim has-cover ">
    <header class="post-header">
      <h1 class="title">Kindle + Python = e-Ink Dashboard (part 2)</h1>
			
      <p class="info"><em>repurposing an old kindle paperwhite 3</em></p>
			
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">Posted October 4, 2020 by Sebastian Proost</div>
  <div class="post-categories">
  in 
    
    <a href="/category/diy">Diy</a>
    
  
  </div>
</section>

<article class="post-content">
  <p>In the <a href="/diy/2020/09/27/PythonKindleDashboard_1.html">last post</a> a Kindle Paperwhite 3 was jailbroken, Python 3.8 installed and all boilerplate code was added to 
have a way to start our script and launch it from <a href="https://www.mobileread.com/forums/showthread.php?t=203326">KUAL</a>. Now we can actually dive into the actual Python code that
will turn the device in a proper DashBoard. To do this we’ll create a miniature ETL pipeline (Extract - Transform - Load),
that will fetch data from relevant websites (the extract part), combine it into a dictionary (the transform) and 
put all parts in an SVG image (the load). The latter can then be converted into a PNG which we can show on the screen.</p>

<p>As always, all code for this project can be found on <a href="https://github.com/4dcu-be/kual-dashboard">GitHub</a>.</p>

<h2 id="coding-the-extract-functions">Coding the Extract Functions</h2>

<p>I have plenty of devices telling me the weather forecast, so I didn’t want to do yet another weather dashboard. Matter 
of fact, a lot of the code here is based on a KUAL Extension that does exactly that. Check it out <a href="https://github.com/x-magic/kindle-weather-stand-alone">here</a>
if you are looking to do a weather dashboard. I’ll pick something more specific for me, but it should be relatively 
easy to adapt the code to other websites and API’s to make a dashboard tailored to your own interests.</p>

<p>After some thinking I decided to pull data from three websites; <a href="https://scholar.google.com/citations?user=4niBmJUAAAAJ&amp;hl=en">Google Scholar</a> to grab the number of citations my
publications have received as well as my <a href="https://en.wikipedia.org/wiki/H-index">H-index</a>, my current <a href="https://www.playgwent.com/en/profile/sepro">Gwent</a> rank and score (a competitive online card-game) 
and from TVMaze air dates of upcoming episode for series I like. To avoid making the installation of this extension 
overly complicated, no additional packages will be used, so only the standard library will be used. Unfortunately, 
this means getting websites with <a href="https://docs.python.org/3/howto/urllib2.html">urllib</a> and regular expressions rather than <a href="https://requests.readthedocs.io/en/master/">requests</a> and <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a>. Though,
moving some complexity from the installation (jailbreaking a Kindle to get this to run is hard enough already) to the 
code is an acceptable trade-off.</p>

<h3 id="grabbing-data-from-google-scholar">Grabbing Data from Google Scholar</h3>

<p>All functions to grab and parse data from websites is contained in <code class="language-plaintext highlighter-rouge">extract.py</code>, my <a href="https://scholar.google.com/citations?user=4niBmJUAAAAJ&amp;hl=en">Google Scholar</a> page is the
easiest to parse so let’s start there.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">ssl</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">json</span>


<span class="k">def</span> <span class="nf">get_google_scholar</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="p">.</span><span class="n">_create_unverified_context</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">hits</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s">'&lt;td class="gsc_rsb_std"&gt;(\d+)&lt;/td&gt;'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="p">))</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'citations'</span><span class="p">,</span> <span class="s">'citations_recent'</span><span class="p">,</span> <span class="s">'h_index'</span><span class="p">,</span> <span class="s">'h_index_recent'</span><span class="p">,</span> <span class="s">'i10_index'</span><span class="p">,</span> <span class="s">'i10_index_recent'</span><span class="p">]</span>

    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">hits</span><span class="p">))</span>
</code></pre></div></div>

<p>As far as getting and parsing an html page goes, this couldn’t be more straightforward. We use urllib to get the 
html data and with a single regular expression can get all fields in the table with the citation statistics. This should
give us six hits on each page and by using the zip and dict function it is possible to quickly merge those hits with the
correct names for the fields.</p>

<p>One odd thing is that the ssl_context needs to be created and added to the request. While the code works fine on
my computer without, it gives an error on the Kindle without this bit included.</p>

<h3 id="getting-the-gwent-profile-data">Getting the Gwent Profile Data</h3>

<p>While a few simple lines sufficed for <a href="https://scholar.google.com/citations?user=4niBmJUAAAAJ&amp;hl=en">Google Scholar</a>, getting the data from my <a href="https://www.playgwent.com/en/profile/sepro">Gwent</a> profile contains a lot more
ugly code. Here the lack of a proper package to parse HTML, like <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">BeautifulSoup</a>, is really tangible. However, while
not the prettiest code, it get’s the job done. It is just a matter of finding the spot in the HTML code where the piece
of information is located and writing up a regular expression to parse it out.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_gwent_data</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="p">.</span><span class="n">_create_unverified_context</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">output</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'player'</span><span class="p">:</span>   <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s">'&lt;strong class="l-player-details__name"&gt;\\n\s+(.*?)&lt;/strong&gt;'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="p">))),</span>
        <span class="s">'mmr'</span><span class="p">:</span>      <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s">'&lt;div class="l-player-details__table-mmr"&gt;.*?&lt;strong&gt;(.*?)&lt;/strong&gt;&lt;/div&gt;'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="p">))).</span><span class="n">replace</span><span class="p">(</span><span class="s">','</span><span class="p">,</span><span class="s">''</span><span class="p">),</span>
        <span class="s">'position'</span><span class="p">:</span> <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s">'&lt;div class="l-player-details__table-position"&gt;.*?&lt;strong&gt;(.*?)&lt;/strong&gt;&lt;/div&gt;'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="p">))).</span><span class="n">replace</span><span class="p">(</span><span class="s">','</span><span class="p">,</span><span class="s">''</span><span class="p">),</span>
        <span class="s">'rank'</span><span class="p">:</span>     <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s">'&lt;span class="l-player-details__rank"&gt;&lt;strong&gt;(.*?)&lt;/strong&gt;&lt;/span&gt;'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="p">))),</span>
        <span class="s">'ladder'</span><span class="p">:</span>   <span class="s">''</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s">'&lt;div class="l-player-details__table-ladder" &gt;&lt;span&gt;(.*?)&lt;/span&gt;&lt;/div&gt;'</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="p">))),</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></div>

<p>Note that re.findall returns a list of all hits, which should contain one element here. Though rather than extracting
that hit with its index, the join function is used. Due to this little trick, if the <a href="https://www.playgwent.com/en/profile/sepro">Gwent</a> website is updated and the
regular expression won’t match the code won’t yield errors, it will just have an empty strings as values. If the values
no longer appear on the dashboard it is time to revise the code, but the other items will still work as planned.</p>

<h3 id="tvmaze">TVMaze</h3>

<p><a href="https://www.tvmaze.com/">TVMaze</a> has an API that returns JSON objects, so that is easy to convert to a dict and doesn’t need messing around with
regular expressions to parse out parts of HTML. However, here there is an extra complexity that data for each show (which
will be passed to the function as a list of IDs) has to be fetched first. If that contains a link to the upcoming episode
we need to get that endpoint additionally to find the name of the episode and the airdate.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_tvmaze_data</span><span class="p">(</span><span class="n">ids</span><span class="p">):</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="p">.</span><span class="n">_create_unverified_context</span><span class="p">()</span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">'http://api.tvmaze.com/shows/%d'</span> <span class="o">%</span> <span class="nb">id</span>
        <span class="k">with</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">)</span> <span class="k">as</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="n">links</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'_links'</span><span class="p">,</span> <span class="p">{})</span>
            <span class="k">if</span> <span class="s">'nextepisode'</span> <span class="ow">in</span> <span class="n">links</span><span class="p">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">with</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">links</span><span class="p">[</span><span class="s">'nextepisode'</span><span class="p">][</span><span class="s">'href'</span><span class="p">],</span> <span class="n">context</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">)</span> <span class="k">as</span> <span class="n">episode_response</span><span class="p">:</span>
                    <span class="n">episode_data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">episode_response</span><span class="p">)</span>
                    <span class="n">output</span><span class="p">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">{</span>
                            <span class="s">'name'</span><span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'error'</span><span class="p">),</span>
                            <span class="s">'episode_name'</span><span class="p">:</span> <span class="n">episode_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'error'</span><span class="p">),</span>
                            <span class="s">'airdate'</span><span class="p">:</span> <span class="n">episode_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'airdate'</span><span class="p">,</span> <span class="s">'error'</span><span class="p">),</span>
                        <span class="p">}</span>
                    <span class="p">)</span>

    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s">'airdate'</span><span class="p">])</span>
</code></pre></div></div>

<h2 id="caching-and-catching-errors-with-a-decorator">Caching and Catching Errors with a Decorator</h2>

<p>Most sites don’t provide new data every hour, so there is no need to fetch the data that often. We can simply store the
results and the next time we refresh check the time since the last modification. If that is recent enough we load the
data and provide that. If the file is older than the chach time, we fetch new data from the internet.</p>

<p>As the data comes from the internet a few things can go wrong, the Kindle’s Wifi might not come up fast enough, or 
the internet might be down, or one of the websites times out … and these errors aren’t caught yet. I also don’t want
the dashboard to display empty information for an hour or more because one website was temporarily unreachable. Here we
can also leverage the cache, if we fail to get up to fetch data from the internet, we load the cache regardless of the
age and show that. It is better to show (slightly) out of date information than no information at all.</p>

<p>The decorator shown below elegantly combines both of these, note there is some boiler plate code for checking the last
modification to a file. This part of the code is included in <code class="language-plaintext highlighter-rouge">./dashboard/bin/cache.py</code></p>

<div class="language-python large-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="n">cache_dir</span> <span class="o">=</span> <span class="s">'/mnt/base-us/extensions/dashboard/cache/'</span> <span class="k">if</span> <span class="n">os</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s">'nt'</span> <span class="k">else</span> <span class="s">'../cache'</span>


<span class="k">def</span> <span class="nf">hours_since_last_modification</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
    <span class="s">""""
    Returns the number of hours since a file was modified. -1 indicates the file doesn't exists
    """</span>
    <span class="k">if</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
        <span class="n">last_modification</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">stat</span><span class="p">(</span><span class="n">file_path</span><span class="p">).</span><span class="n">st_mtime</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">-</span> <span class="n">last_modification</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3600</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>


<span class="k">def</span> <span class="nf">cache</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="n">cache_time</span><span class="p">):</span>
    <span class="s">"""
    Decorator that combine two things:
        * if the decorated function fails (for any reason) it will pull the most recent data
        from cache and return those.
        * if the cache file is more recent than cache_time and return the
        cached data if the file is recent enough

    :param cache_file: File to write cache to
    :param cache_time: How long (in hours) a file should be cached
    """</span>

    <span class="k">def</span> <span class="nf">deco_cache</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
        <span class="o">@</span><span class="n">wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">f_cache</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">hslm</span> <span class="o">=</span> <span class="n">hours_since_last_modification</span><span class="p">(</span><span class="n">cache_file</span><span class="p">)</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">hslm</span> <span class="o">&lt;</span> <span class="n">cache_time</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fin</span><span class="p">:</span>
                    <span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">fin</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">output</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">output</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fout</span><span class="p">:</span>
                    <span class="n">json</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">fout</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fin</span><span class="p">:</span>
                    <span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">fin</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">output</span>

        <span class="k">return</span> <span class="n">f_cache</span>

    <span class="k">return</span> <span class="n">deco_cache</span>
</code></pre></div></div>

<p>To get this running we’ll need to decorate the extract functions like shown below. The decorator takes one argument, the 
filename to write to (potentially this could be done automatically based on the decorated function’s name).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ...
</span><span class="kn">from</span> <span class="nn">dashboard.bin.cache</span> <span class="kn">import</span> <span class="n">cache_dir</span><span class="p">,</span> <span class="n">cache</span>
<span class="c1"># ...
</span>
<span class="o">@</span><span class="n">cache</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">,</span> <span class="s">'scholar.json'</span><span class="p">),</span> <span class="mi">8</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_google_scholar</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="c1"># ...
</span>
<span class="o">@</span><span class="n">cache</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">,</span> <span class="s">'gwent.json'</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_gwent_data</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="c1"># ...
</span></code></pre></div></div>

<h2 id="time-to-transform-and-load">Time to Transform and Load</h2>

<p>So now we have to finish <code class="language-plaintext highlighter-rouge">run.py</code> which will be called by the shell script every hour, run the extract functions,
combine the output and visualize it. An easy way to create a dashboard is using an SVG file that looks exactly the way 
you like, but with a token in spots 
where you want the dynamic text and values to appear. I’ve used this trick before and this is also what was used in the
weather dashboard I’ve been using as a reference for this project. This is very easy code-wise, just see the updated
<code class="language-plaintext highlighter-rouge">run.py</code> below. All extracted data is combined in a dict, <code class="language-plaintext highlighter-rouge">./svg/template.svg</code> is loaded as a text file and all the
tokens are replaced by the values to display. Finally, the output is written to disk. There is one line of code that
will check if the operating system is windows and adjust the path accordingly. This is useful for debugging as I can
execute the code on my main machine without issues.</p>

<div class="language-python large-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># bin/python3
# encoding: utf-8
</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>
<span class="kn">from</span> <span class="nn">extract</span> <span class="kn">import</span> <span class="n">get_google_scholar</span><span class="p">,</span> <span class="n">get_gwent_data</span><span class="p">,</span> <span class="n">get_tvmaze_data</span>


<span class="n">scholar_url</span> <span class="o">=</span> <span class="s">"http://scholar.google.com/citations?user=4niBmJUAAAAJ&amp;hl=en"</span>
<span class="n">gwent_url</span> <span class="o">=</span> <span class="s">"http://www.playgwent.com/en/profile/sepro"</span>
<span class="n">tvmaze_ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span>        <span class="c1"># The 100
</span>              <span class="mi">79</span><span class="p">,</span>       <span class="c1"># The Goldbergs
</span>              <span class="mi">38963</span><span class="p">,</span>    <span class="c1"># The Mandalorian
</span>              <span class="mi">17128</span>     <span class="c1"># This Is Us
</span>              <span class="p">]</span>

<span class="n">svg_path</span> <span class="o">=</span> <span class="s">'/mnt/base-us/extensions/dashboard/svg/'</span> <span class="k">if</span> <span class="n">os</span><span class="p">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s">'nt'</span> <span class="k">else</span> <span class="s">'../svg'</span>


<span class="k">def</span> <span class="nf">create_svg</span><span class="p">(</span><span class="n">svg_data</span><span class="p">,</span> <span class="n">svg_template</span><span class="p">,</span> <span class="n">svg_output</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">svg_template</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fin</span><span class="p">:</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">fin</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">svg_data</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">template</span> <span class="o">=</span> <span class="n">template</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">svg_output</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fout</span><span class="p">:</span>
            <span class="n">fout</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">fmt_date</span><span class="p">(</span><span class="n">date_input</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date_input</span><span class="p">,</span> <span class="s">'%Y-%m-%d'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">d</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%d/%m/%Y'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">is_today</span><span class="p">(</span><span class="n">date_input</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">"%Y-%m-%d"</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">date_input</span> <span class="o">==</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="c1"># Get Data
</span>    <span class="n">gs_data</span> <span class="o">=</span> <span class="n">get_google_scholar</span><span class="p">(</span><span class="n">scholar_url</span><span class="p">)</span>
    <span class="n">gwent_data</span> <span class="o">=</span> <span class="n">get_gwent_data</span><span class="p">(</span><span class="n">gwent_url</span><span class="p">)</span>
    <span class="n">tvmaze_data</span> <span class="o">=</span> <span class="n">get_tvmaze_data</span><span class="p">(</span><span class="n">tvmaze_ids</span><span class="p">)</span>

    <span class="c1"># Combine into dict
</span>    <span class="n">svg_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"GS_HINDEX"</span><span class="p">:</span> <span class="n">gs_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"h_index"</span><span class="p">),</span>
                <span class="s">"GS_CITATIONS"</span><span class="p">:</span> <span class="n">gs_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"citations"</span><span class="p">),</span>
                <span class="s">"GWENT_LADDER_RANK"</span><span class="p">:</span> <span class="n">gwent_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"ladder"</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="s">" (Rank "</span> <span class="o">+</span> <span class="n">gwent_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"rank"</span><span class="p">)</span> <span class="o">+</span> <span class="s">")"</span> <span class="k">if</span> <span class="s">"Pro"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">gwent_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"ladder"</span><span class="p">)</span> <span class="k">else</span> <span class="s">""</span><span class="p">),</span>
                <span class="s">"GWENT_MMR"</span><span class="p">:</span> <span class="n">gwent_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"mmr"</span><span class="p">),</span>
                <span class="s">"GWENT_POSITION"</span><span class="p">:</span> <span class="n">gwent_data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"position"</span><span class="p">),</span>
                <span class="s">"LASTUPDATE"</span><span class="p">:</span> <span class="s">"Last Update: "</span> <span class="o">+</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d/%m/%Y - %H:%M:%S"</span><span class="p">)}</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">tvmaze_data</span><span class="p">):</span>
            <span class="n">svg_data</span><span class="p">[</span><span class="s">"TV_SHOW_%d"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">tvmaze_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s">"name"</span><span class="p">]</span>
            <span class="n">svg_data</span><span class="p">[</span><span class="s">"TV_EPISODE_%d"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="n">tvmaze_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s">"episode_name"</span><span class="p">]</span>
            <span class="n">svg_data</span><span class="p">[</span><span class="s">"TV_AIRDATE_%d"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="s">"TODAY"</span> <span class="k">if</span> <span class="n">is_today</span><span class="p">(</span><span class="n">tvmaze_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s">"airdate"</span><span class="p">])</span> \
                <span class="k">else</span> <span class="n">fmt_date</span><span class="p">(</span><span class="n">tvmaze_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s">"airdate"</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">svg_data</span><span class="p">[</span><span class="s">"TV_SHOW_%d"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="s">"No upcoming episodes found"</span>
            <span class="n">svg_data</span><span class="p">[</span><span class="s">"TV_EPISODE_%d"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="s">""</span>
            <span class="n">svg_data</span><span class="p">[</span><span class="s">"TV_AIRDATE_%d"</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">=</span> <span class="s">""</span>

    <span class="c1"># Load Data into SVG
</span>    <span class="n">create_svg</span><span class="p">(</span><span class="n">svg_data</span><span class="p">,</span> <span class="n">join</span><span class="p">(</span><span class="n">svg_path</span><span class="p">,</span> <span class="s">"template.svg"</span><span class="p">),</span> <span class="n">join</span><span class="p">(</span><span class="n">svg_path</span><span class="p">,</span> <span class="s">"tmp.svg"</span><span class="p">))</span>

</code></pre></div></div>

<h2 id="revising-startsh">Revising start.sh</h2>

<p>Now <code class="language-plaintext highlighter-rouge">run.py</code> will create a new SVG file each time it is called. However we need to revise <code class="language-plaintext highlighter-rouge">start.sh</code> to convert this
SVG into a PNG image and show that image on the screen. The Weather Dashboard uses a combination of <a href="https://en.wikipedia.org/wiki/Librsvg">rsvg-convert</a> and
pngcruch to create a png file compatible with the Kindle’s own <code class="language-plaintext highlighter-rouge">eips</code> command to put it on the screen. Here, the
SVG is still converted using the same tool, but <code class="language-plaintext highlighter-rouge">fbink</code> is used, which can put any png image on the screen correctly,
without the need for an additional conversion using pngcruch. Furthermore, the temporary files will be cleaned up in this
script.</p>

<p>One big issue is that the Kindle mounts most partitions with the <code class="language-plaintext highlighter-rouge">noexec</code> flag, meaning you can’t execute code and
scripts from there. For scripts that isn’t much of an issue as you can overcome this by starting them through the 
interpreter; <code class="language-plaintext highlighter-rouge">/bin/sh &lt;scriptname&gt;</code> and <code class="language-plaintext highlighter-rouge">python3 &lt;scriptname&gt;</code> can be used for shell and python scripts respectively. To
run rsvg-convert there is a bigger issue as this is a binary file. The workaround here is to copy the executable code
and libraries to a share where code can be executed, here <code class="language-plaintext highlighter-rouge">/var/tmp</code> is used, add the path to the libraries to the 
environmental variable <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code> and run the program from there.</p>

<p>To avoid flooding KUAL’s log over time (especially <code class="language-plaintext highlighter-rouge">fbink</code> is very verbose) all output from the tools is caught and
piped to <code class="language-plaintext highlighter-rouge">/dev/null</code> (essentially the command line’s garbage bin) by appending <code class="language-plaintext highlighter-rouge">&gt; /dev/null 2&gt;&amp;1</code> to the command.</p>

<div class="language-bash large-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

<span class="nb">cd</span> <span class="s2">"/mnt/base-us/extensions/dashboard/"</span>

<span class="c"># Make sure there is enough time to reconnect to the wifi</span>
<span class="nb">sleep </span>30

<span class="c"># Remove files</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> ./svg/tmp.svg <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">rm</span> ./svg/tmp.svg
<span class="k">fi

if</span> <span class="o">[</span> <span class="nt">-f</span> ./svg/tmp.png <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">rm</span> ./svg/tmp.png
<span class="k">fi</span>

<span class="c"># Run script to download data and generate new SVG file</span>
python3 ./bin/run.py

<span class="c"># Copy rsvg-convert to a share where it can be started</span>
<span class="c"># The shared folder that can be accessed via USB is mounted with the noexec flag,</span>
<span class="c"># copying file to /var/tmp gets around this restriction.</span>
<span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-f</span> /var/tmp/rsvg-convert <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">cp</span> <span class="nt">-rf</span> ./external/<span class="k">*</span> /var/tmp
<span class="k">fi</span>

<span class="c"># Check if svg exists and if it does convert it to PNG and show on screen</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-e</span> ./svg/tmp.svg <span class="o">]</span><span class="p">;</span> <span class="k">then
  </span><span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/var/tmp/rsvg-convert-lib:/usr/lib:/lib
  /var/tmp/rsvg-convert-lib/rsvg-convert <span class="nt">--background-color</span><span class="o">=</span>white <span class="nt">-o</span> ./svg/tmp.png ./svg/tmp.svg <span class="o">&gt;</span> /dev/null 2&gt;&amp;1
  fbink <span class="nt">-c</span> <span class="nt">-g</span> <span class="nv">file</span><span class="o">=</span>./svg/tmp.png,w<span class="o">=</span>1072,halign<span class="o">=</span>center,valign<span class="o">=</span>center <span class="o">&gt;</span> /dev/null 2&gt;&amp;1
<span class="k">fi</span>

<span class="c"># Make sure the screen is fully refreshed before going to sleep</span>
<span class="nb">sleep </span>5

<span class="nb">echo</span> <span class="s2">""</span> <span class="o">&gt;</span> /sys/class/rtc/rtc1/wakealarm
<span class="c"># Following line contains sleep time in seconds</span>
<span class="nb">echo</span> <span class="s2">"+3600"</span> <span class="o">&gt;</span> /sys/class/rtc/rtc1/wakealarm
<span class="c"># Following line will put device into deep sleep until the alarm above is triggered</span>
<span class="nb">echo </span>mem <span class="o">&gt;</span> /sys/power/state

<span class="c"># Kill self and spawn a new instance</span>
/bin/sh ./bin/start.sh <span class="o">&amp;&amp;</span> <span class="nb">exit</span>
</code></pre></div></div>

<h2 id="disable-the-kindles-deep-sleep">Disable the Kindle’s Deep Sleep</h2>

<p>Normally, after 10 minutes of inactivity, a Kindle goes into deep sleep, without the wakeup timer enabled. This needs to be disabled,
otherwise each time the Dashboard wakes up for ~45 seconds to refresh its data, the clock is ticking … 
and once 10 minutes have passed in total the Kindle goes into deep sleep permanently until the power button
is pressed. The dashboard will stop refreshing once this happens. To disable the Kindle’s deep sleep you can type <code class="language-plaintext highlighter-rouge">~ds</code>
in the <strong>search bar</strong> and hit enter.</p>

<p><a href="/assets/posts/2020-10-04-PythonKindleDashboard_2/final_dashboard.jpg" class="lightgallery-link" data-sub-html="The final result, the dashboard running on a Kindle Paperwhite 3">
<img src="/assets/posts/2020-10-04-PythonKindleDashboard_2/final_dashboard.jpg" alt="The final result, the dashboard running on a Kindle Paperwhite 3" data-src="/assets/posts/2020-10-04-PythonKindleDashboard_2/final_dashboard.jpg" loading="lazy" />
</a></p>

<h2 id="conclusion">Conclusion</h2>

<p>While I initially thought getting something to run on a Kindle would be the hard part, it turns out I was wrong… Making 
sure a script runs perpetually was harder. With issues popping up only after some time, it becomes very time consuming 
to pick up and fix errors. It took me quite some time to figure out that the Kindle was still going into deep sleep on 
its own, realize a forgotten <code class="language-plaintext highlighter-rouge">print</code> statement caused a strange error in combination with a long running script and 
KUAL, … Not being able to execute code directly from the extension folder also was unexpected and took a fair bit of
hacking to figure out what was going on, and where I would be able to run the program from.</p>

<p>However, despite all that, the Kindle is now turned into a dashboard for my desk! Saving the device from being thrown 
away, mission accomplished ! Only thing to do is 3D print a nice stand for it.</p>


</article>



<section class="tags">
	<strong><i class="fa fa-tags"></i> Tags:</strong> <a href="/tag/python">python</a>,&nbsp;<a href="/tag/kindle">kindle</a>,&nbsp;<a href="/tag/dashboard">dashboard</a>,&nbsp;<a href="/tag/gwent">gwent</a>,&nbsp;<a href="/tag/tv">TV</a>
</section>



<section class="rss">
	
	<p class="rss-subscribe text">Liked this post ? <strong><a href="https://buymeacoffee.com/4dcube">You can buy me a coffee <i class="fa fa-coffee"></i></a></strong></p>
	
</section>

<section class="share">
  <span>Share: </span>
  
    
    
      <a href="//twitter.com/share?text=Kindle+%2B+Python+%3D+e-Ink+Dashboard+%28part+2%29&url=https%3A%2F%2Fblog.4dcu.be%2Fdiy%2F2020%2F10%2F04%2FPythonKindleDashboard_2.html&via=ProostSebastian"
        onclick="window.open(this.href, 'twitter-share', 'width=550,height=255');return false;">
        <i class="fa fa-twitter-square fa-lg"></i>
      </a>
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=Kindle+%2B+Python+%3D+e-Ink+Dashboard+%28part+2%29&u=https%3A%2F%2Fblog.4dcu.be%2Fdiy%2F2020%2F10%2F04%2FPythonKindleDashboard_2.html"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
      <a href="//www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fblog.4dcu.be%2Fdiy%2F2020%2F10%2F04%2FPythonKindleDashboard_2.html"
        onclick="window.open(this.href, 'linkedin-share', 'width=550,height=255');return false;">
        <i class="fa fa-linkedin-square fa-lg"></i>
      </a>
    
    
    
    
  
</section>

	<section class="post-navigation">
		<span class="prev-post">
			
				<a href="/diy/2020/09/27/PythonKindleDashboard_1.html">
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-left fa-stack-1x fa-inverse"></i>
					</span>
					<span class="page-number">Kindle + Python = e-Ink Dashboard (part 1)</span>
				</a>
			
		</span>
		<span class="next-post">
			
				<a href="/diy/2020/10/17/3D-printing_2.html">
					<span class="page-number">Five reasons for 3D printing</span>
					<span class="fa-stack fa-lg">
						<i class="fa fa-square fa-stack-2x"></i>
						<i class="fa fa-angle-double-right fa-stack-1x fa-inverse"></i>
					</span>
				</a>
			
		</span>
	</section>




<section class="disqus">
  <div id="disqus_thread"></div>
  <script type="text/javascript" cookie-consent="functionality">
    var disqus_shortname = '4dcube';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



</div>
</div>

    </div>

		<div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
	<div class="modal__overlay" tabindex="-1" data-micromodal-close>
		<div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
			<header class="modal__header">
				<h2 class="modal__title" id="modal-1-title">
					Contact
				</h2>
			</header>
			<main class="modal__content" id="modal-1-content">
				<p>Have any comments or suggestions, your are welcome to reach out !</p>
				<ul class="modal__list">
						<li>
	<i class="fa fa-envelope-o"></i>
	<a href="mailto:sebastian.proost@gmail.com">
		<span class="username">sebastian.proost@gmail.com</span>
	</a>
</li>


	
	<li>
		<i class="fa fa-twitter"></i>
		<a href="https://twitter.com/ProostSebastian" title="Follow me on Twitter">
			<span class="username">ProostSebastian</span>
		</a>
	</li>
	

	
	<li>
		<i class="fa fa-github"></i>
		<a href="https://github.com/4dcu-be" title="Fork me on GitHub">
			<span class="username">4dcu-be</span>
		</a>
	</li>
	

	
	<li>
		<i class="fa fa-github"></i>
		<a href="https://github.com/sepro" title="Fork me on GitHub">
			<span class="username">sepro</span>
		</a>
	</li>
	

	

	


				</ul>
				
				<br />
				<p>Do you like this blog and wish to contribute? You could <a href="https://buymeacoffee.com/4dcube">Buy me a Coffee <i class="fa fa-coffee"></i></a>!</p>
				
			</main>
			<footer class="modal__footer">
				<button class="modal__btn modal__btn-primary" data-micromodal-close="" aria-label="Close this dialog window">Close</button>
			</footer>
		</div>
	</div>
</div>


    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">4DCu.be</h3>

		<div>
			<div class="site-navigation">

				<p><strong>Site Map</strong></p>
				<ul class="pages">
					
				<li class="nav-link"><a href="/about/">About</a>
	
				<li class="nav-link"><a href="/gallery/">Gallery</a>
	
				<li class="nav-link"><a href="/posts/">Posts</a>
	
				<li class="nav-link"><a href="#" class="nav-link-contact">Contact</a></li>

				</ul>
				<br />
				<p><strong>Legal</strong></p>
				<p><a href="/policy/">Privacy policy</a></p>
			</div>

			<div class="site-contact">
				<p><strong>Contact</strong></p>
				<ul class="social-media-list">
					<li>
	<i class="fa fa-envelope-o"></i>
	<a href="mailto:sebastian.proost@gmail.com">
		<span class="username">sebastian.proost@gmail.com</span>
	</a>
</li>


	
	<li>
		<i class="fa fa-twitter"></i>
		<a href="https://twitter.com/ProostSebastian" title="Follow me on Twitter">
			<span class="username">ProostSebastian</span>
		</a>
	</li>
	

	
	<li>
		<i class="fa fa-github"></i>
		<a href="https://github.com/4dcu-be" title="Fork me on GitHub">
			<span class="username">4dcu-be</span>
		</a>
	</li>
	

	
	<li>
		<i class="fa fa-github"></i>
		<a href="https://github.com/sepro" title="Fork me on GitHub">
			<span class="username">sepro</span>
		</a>
	</li>
	

	

	


				</ul>
			</div>

			<div class="site-signature">
				
				<p><strong>Contribute</strong></p>
				<p><i class="fa fa-coffee"></i> <a href="https://buymeacoffee.com/4dcube">Buy me a Coffee </a></p>
				
				<p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
				
			</div>
		</div>


  </div>

</footer>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="/js/lightgallery.min.js"></script>
<script src="https://unpkg.com/micromodal/dist/micromodal.min.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    enableMenu: false
  },
  tex: {
    packages: ['base', 'ams']
  },
  loader: {
    load: ['ui/menu', '[tex]/ams']
  }
};
</script>
<script type="text/javascript" id="MathJax-script"
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.min.js">
</script>
<script>
	AOS.init({
   once: true,
   offset: -20,
   duration: 600
	});
</script>


<script type="text/javascript">
$(document).ready(function() {
  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });

});

</script>
<script type="text/javascript">
$(document).ready(function() {
		$(".post-content").lightGallery({
			 thumbnail:false,
			 selector: '.lightgallery-link'
		});
});
</script>

<!-- Contact Modal -->
<script type="text/javascript">
$(document).ready(function() {
	MicroModal.init();

	$('.nav-link-contact').click(function(ev) {
	  ev.preventDefault();
	  MicroModal.show('modal-1', {
	  		onClose: function() { $('.nav-link-contact').blur(); },
	  		disableFocus: true
	  });
	});

});
</script>






  </body>

</html>
